<!DOCTYPE html> <html><head>
        <title>Material UI</title>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="crossorigin">
        <link href="https://fonts.googleapis.com/css2?family=Roboto&amp;display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Sharp:opsz,wght,FILL,GRAD@40,400,0,0">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <style>
            :root {
                --primary-rgb: 10, 80, 237;
                --secondary-rgb: 112, 0, 255;
                --dark-rgb: 0, 0, 0;
                --ripple-color-rgb: 0, 0, 0;
            }

            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family: 'Roboto', sans-serif;
                background-color: #fff;
                background-image: url(https://wallpaperaccess.com/full/1269989.jpg);
            }

            img {
                width: 100%;
            }

            .ui-navbar {
                --navbar-tint: var(--dark-rgb);
                position: fixed;
                top: 0;
                box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
                display: flex;
                gap: 10px;
                width: 100%;
                padding: 10px;
                background-color: rgba(var(--navbar-tint), 0.75);
                backdrop-filter: blur(5px) saturate(2.5);
                color: #fff;
            }

            .ui-navbar .ui-btn {
                --ripple-tint: 255, 255, 255;
                --btn-tint: 255, 255, 255;
                background-color: transparent;
            }

            .ui-btn {
                --btn-tint: 50, 50, 50;
                --ripple-tint: var(--btn-tint);

                display: inline-flex;
                font-family: 'Roboto', sans-serif;
                user-select: none;
                gap: 5px;
                justify-content: center;
                align-items: center;
                padding: 5px 10px;
                border: none;
                border-radius: 500px;
                background-color: transparent;
                color: inherit;
                transition: ease-out 0.25s;
                cursor: pointer;
                font-weight: bold;
                white-space: nowrap;
                text-overflow: ellipsis;
                position: relative;
                background-color: rgba(var(--btn-tint), 0.25);
                color: rgba(var(--btn-tint), 0.75);
            }

            .ui-btn:hover {
                background-color: rgba(var(--btn-tint), 0.35);
            }

            .ui-btn[bordered~=prominent] {
                --ripple-tint: 255, 255, 255 !important;
                background-color: rgba(var(--btn-tint), 1);
                color: var(--blend-mode) !important;
            }

            .ui-btn[bordered~=outlined] {
                background-color: transparent;
                color: inherit;
                border: solid 1px rgba(var(--btn-tint), 1);
            }

            .ui-btn[rounded] {
                padding: 5px;
            }

            .ui-btn[color~=light] {
                --btn-tint: 255, 255, 255;
                --blend-mode: black;
                --ripple-tint: 255, 255, 255;
            }

            .ui-btn[color~=primary] {
                --btn-tint: var(--primary-rgb);
                --blend-mode: white;
                --ripple-tint: var(--primary-rgb);
            }

            .ui-btn[color~=secondary] {
                --btn-tint: var(--secondary-rgb);
                --blend-mode: white;
                --ripple-tint: var(--secondary-rgb);
            }

            .ui-modal {
                position: absolute;
                top: 0;
                right: 0;
                left: 0;
                bottom: 0;
                transition: background-color 0.1s;
                background-color: #000;
            }

            .ui-modal--hidden {
                display: none;
            }

            .ui-sheet {
                display: flex;
                flex-direction: column;
                position: fixed;
                width: 450px;
                max-width: 100%;
                height: 100vh;

                overflow: overlay;

                right: 0;
                top: 0;

                background-color: #fff;
                color: #000;

                transform: translate(0, 50%);
                border-top-left-radius: 12px;
                border-top-right-radius: 12px;
                /*     border: solid 1px rgba(0, 0, 0, 0.15); */
                /*     border-bottom: none; */
                box-shadow: rgba(0, 0, 0, 0.05) 0px 0px 10px 4px;

                transition: border-radius 0.2s, background-color 0.3s;
            }

            .ui-sheet--minimized {}

            .ui-sheet--hidden {
                display: none;
            }

            .ui-sheet--sliding {
                transition: transform 0.2s;
            }

            .ui-sheet--full {
                border-radius: 0;
            }

            .ui-sheet__draggable {
                display: flex;
                justify-content: center;
                padding: 15px;
                cursor: grab;
            }

            .ui-sheet__knob {
                border: none;
                border-top: solid 4px;
                border-radius: 5px;
                width: 25%;
                padding: 0px;
            }

            .ui-sheet__header {
                display: flex;
                flex-direction: column;
                font-weight: bold;
                font-size: 24px;
                background-color: rgba(var(--primary-rgb), 1);
                color: #fff;
            }

            .ui-header {
                display: flex;
                align-items: center;
                justify-content: space-between;
            }

            .ui-header__title {
                padding: 20px;
                flex: 1;
                display: flex;
            }

            .ui-header__actions {
                padding-right: 10px;
            }

            .ui-sheet__body {
                padding: 15px;
                flex-grow: 1;
                overflow-y: auto;
            }

            .ui-btn-group {
                display: flex;
                gap: 5px;
                overflow-x: auto;
                padding-bottom: 10px;
            }
            
            .ui-ripple {
                z-index: 0;
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                overflow: hidden;
                border-radius: inherit;
            }
        </style>

        <template id="ui-btn-template">
            <style>

                ._ripple--enter {
                    z-index: 0;
                    position: absolute;
                    /* The absolute position we mentioned earlier */
                    border-radius: 50%;
                    transform: scale(0);
                    -webkit-animation: rippleEnter 0.3s forwards;
                    animation: rippleEnter 0.3s forwards;
                    background-color: rgba(var(--ripple-color-rgb), 0.3);
                }

                ._ripple--leave {
                    -webkit-animation: rippleLeave 0.6s;
                    animation: rippleLeave 0.6s;
                }

                @-webkit-keyframes rippleEnter {
                    from {
                        transform: scale(0);
                    }

                    to {
                        transform: scale(2);
                    }
                }

                @keyframes rippleEnter {
                    from {
                        transform: scale(0);
                    }

                    to {
                        transform: scale(2);
                    }
                }

                @-webkit-keyframes rippleLeave {
                    from {
                        transform: scale(2);
                        opacity: 1;
                    }

                    to {
                        transform: scale(2);
                        opacity: 0;
                    }
                }

                @keyframes rippleLeave {
                    from {
                        transform: scale(2);
                        opacity: 1;
                    }

                    to {
                        transform: scale(2);
                        opacity: 0;
                    }
                }
            </style>
        </template>

        <template id="body-sheet">
            <div class="ui-btn-group">
                <button is="ui-btn" color="primary">
                    Shein
                    <span class="material-symbols-sharp">
                        open_in_new
                    </span>
                </button>
                <button is="ui-btn" color="primary">
                    Amazon
                    <span class="material-symbols-sharp">
                        open_in_new
                    </span>
                </button>
                <button is="ui-btn" color="secondary">
                    Hanes
                    <span class="material-symbols-sharp">
                        open_in_new
                    </span>
                </button>
                <button is="ui-btn">
                    Fruit of the Loom
                    <span class="material-symbols-sharp">
                        open_in_new
                    </span>
                </button>
            </div>
        </template>
    <style></style></head>
    <body>
        <nav is="ui-navbar" class="ui-navbar">
            <button is="ui-btn" rounded="">
                <span class="material-symbols-sharp">
                    menu
                </span>
            </button>

            <button is="ui-btn">
                <span class="material-symbols-sharp">
                    home
                </span>
                Home
            </button>

            <button is="ui-btn" id="show-sheet" color="primary" bordered="prominent">
                <span class="material-symbols-sharp">
                    shopping_cart
                </span>
                My Cart
            </button>
        </nav>

        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>v<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>

        <div id="sheet-0"></div>
    
<script>
/*__POPCODESTART__*/
function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _wrapNativeSuper(Class) { var _cache = typeof Map === "function" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== "function") { throw new TypeError("Super expression must either be null or a function"); } if (typeof _cache !== "undefined") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }

function _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

function _isNativeFunction(fn) { return Function.toString.call(fn).indexOf("[native code]") !== -1; }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function isEmpty(variable) {
  return typeof variable !== 'undefined' && variable;
}

function supportsTouch() {
  return 'ontouchstart' in window || navigator.maxTouchPoints > 0 || navigator.msMaxTouchPoints > 0;
}

var MaterialIcon = function MaterialIcon(icon) {
  "use strict";

  _classCallCheck(this, MaterialIcon);

  console.log('<span class="material-icons">&#xe316;</span>');
};

var Alert = function Alert() {
  "use strict";

  _classCallCheck(this, Alert);
};

var Ripple = /*#__PURE__*/function (_HTMLElement) {
  "use strict";

  _inherits(Ripple, _HTMLElement);

  var _super = _createSuper(Ripple);

  function Ripple() {
    var _this;

    _classCallCheck(this, Ripple);

    _this = _super.call(this);
    _this.shadow = _this.attachShadow({
      mode: "open"
    });
    _this.template = document.getElementById("ui-btn-template").content.cloneNode(true);

    _this.shadow.appendChild(_this.template);

    return _this;
  }

  _createClass(Ripple, [{
    key: "connectedCallback",
    value: function connectedCallback() {
      this.parent = this.parentElement;

      if (isEmpty(this.parent)) {
        this.classList.add("ui-ripple");
      }

      this.rippleFadeDelay = 300;
      this.buttonTint = window.getComputedStyle(this).getPropertyValue('--ripple-tint');
      this.listenElement();
    }
  }, {
    key: "bounds",
    get: function get() {
      return this.getBoundingClientRect();
    }
  }, {
    key: "calcClient",
    value: function calcClient(e) {
      this.clientX = 0;
      this.clientY = 0;

      if (e.clientX || e.clientY) {
        this.clientX = e.clientX;
        this.clientY = e.clientY;
      }

      if (e.touches) {
        this.clientX = e.touches[0].clientX;
        this.clientY = e.touches[0].clientY;
      }
    }
  }, {
    key: "rippleEnter",
    value: function rippleEnter(e) {
      this.getRipplesNotLeave();
      this.calcClient(e);
      this.circle = document.createElement("span");
      this.diameter = Math.max(this.parent.clientWidth, this.parent.clientHeight);
      this.radius = this.diameter / 2;
      this.x = "".concat(this.clientX - this.bounds.left - this.radius, "px");
      this.y = "".concat(this.clientY - this.bounds.top - this.radius, "px");
      this.centerX = "".concat(this.bounds.width / 2, "px");
      this.centerY = "".concat(this.bounds.height / 2, "px");

      if (this.clientX === 0 && this.clientY === 0) {
        this.x = "".concat(this.centerX - this.radius, "px");
        this.y = "".concat(this.centerY - this.radius, "px");
      }

      this.circle.style.width = this.circle.style.height = "".concat(this.diameter, "px");
      this.circle.style.left = this.x;
      this.circle.style.top = this.y;
      this.circle.classList.add("_ripple--enter");

      if (this.buttonTint) {
        this.circle.style.backgroundColor = "rgba(".concat(this.buttonTint, ",0.25)");
      }

      this.shadow.appendChild(this.circle);
      e.stopImmediatePropagation();
    }
  }, {
    key: "getRipplesNotLeave",
    value: function getRipplesNotLeave() {
      var ripples = this.shadow.querySelectorAll("._ripple--enter:not(._ripple--leave)");
      ripples.forEach(function (ripple) {
        ripple.classList.add("_ripple--leave");
      });
    }
  }, {
    key: "rippleLeave",
    value: function rippleLeave(e) {
      var _this2 = this;

      setTimeout(function () {
        _this2.getRipplesNotLeave();

        _this2.removeRipples();
      }, this.rippleFadeDelay);
      e.stopImmediatePropagation();
    }
  }, {
    key: "removeRipples",
    value: function removeRipples() {
      var ripples = this.shadow.querySelectorAll("._ripple--leave");
      ripples.forEach(function (ripple) {
        ripple.addEventListener("animationend", function () {
          ripple.remove();
        });
      });
    }
  }, {
    key: "listenElement",
    value: function listenElement() {
      var _this3 = this;

      if (supportsTouch()) {
        this.addEventListener("touchstart", function (e) {
          _this3.rippleEnter(e);
        });
        this.addEventListener("touchend", function (e) {
          _this3.rippleLeave(e);
        });
        this.addEventListener("touchleave", function (e) {
          _this3.rippleLeave(e);
        });
        this.addEventListener("touchcancel", function (e) {
          _this3.rippleLeave(e);
        });
      } else {
        this.addEventListener("mousedown", function (e) {
          _this3.rippleEnter(e);
        });
        this.addEventListener("mouseup", function (e) {
          _this3.rippleLeave(e);
        });
        this.addEventListener("mouseleave", function (e) {
          _this3.rippleLeave(e);
        });
      }
    }
  }]);

  return Ripple;
}( /*#__PURE__*/_wrapNativeSuper(HTMLElement));

var Button = /*#__PURE__*/function (_HTMLButtonElement) {
  "use strict";

  _inherits(Button, _HTMLButtonElement);

  var _super2 = _createSuper(Button);

  function Button() {
    var _this4;

    _classCallCheck(this, Button);

    _this4 = _super2.call(this);

    _this4.createElement();

    return _this4;
  }

  _createClass(Button, [{
    key: "createElement",
    value: function createElement() {
      this.classList.add("ui-btn");
      this.ripple = document.createElement("ui-ripple");
      this.appendChild(this.ripple);
    }
  }]);

  return Button;
}( /*#__PURE__*/_wrapNativeSuper(HTMLButtonElement));

window.customElements.define('ui-btn', Button, {
  extends: "button"
});
window.customElements.define('ui-ripple', Ripple);

var Sheet = /*#__PURE__*/function () {
  "use strict";

  function Sheet(_ref) {
    var id = _ref.id,
        dismissible = _ref.dismissible,
        title = _ref.title,
        body = _ref.body;

    _classCallCheck(this, Sheet);

    this.id = id;
    this.title = title;
    this.body = body;
    var global = this;
    this.props = {
      dismissible: dismissible || false,
      draggable: true,
      positions: {
        mini: "mini",
        half: "half",
        full: "full"
      }
    };
    this.state = {
      dismissed: false,
      dragging: false,
      position: global.props.positions.half
    };
    this.createSheet();
    this.listenSheet();
  }

  _createClass(Sheet, [{
    key: "createSheet",
    value: function createSheet() {
      var _this5 = this;

      this.sheetContainer = document.getElementById(this.id);
      this.sheet = document.createElement("div");
      this.sheet.classList.add("ui-sheet");
      this.sheetKnob = document.createElement("div");
      this.sheetKnob.classList.add("ui-sheet__draggable");
      this.sheetKnobHandle = document.createElement("div");
      this.sheetKnobHandle.classList.add("ui-sheet__knob");
      this.sheetKnob.appendChild(this.sheetKnobHandle);
      this.sheetHeader = document.createElement("div");
      this.sheetHeader.classList.add("ui-sheet__header");
      this.sheetNavbar = document.createElement("div");
      this.sheetNavbar.classList.add("ui-header");
      this.sheetNavbarTitleContainer = document.createElement("div");
      this.sheetNavbarTitleContainer.classList.add("ui-header__title");
      this.sheetNavbarTitle = document.createTextNode(this.title);
      this.sheetNavbarTitleContainer.append(this.sheetNavbarTitle);
      this.sheetNavbarActions = document.createElement("div");
      this.sheetNavbarActions.classList.add("ui-header__actions");
      this.actionDismiss = document.createElement("button");
      this.actionDismiss.setAttribute("is", "ui-btn");
      this.actionDismiss.classList.add("ui-btn");
      this.actionDismiss.setAttribute("color", "light");
      this.actionDismiss.setAttribute("rounded", true);
      this.actionDismiss.innerHTML = '<span class="material-symbols-sharp">close</span>';

      this.actionDismiss.onclick = function () {
        _this5.sheetState = {
          dismissed: true
        };
      };

      this.sheetNavbarActions.appendChild(this.actionDismiss);
      this.sheetNavbar.appendChild(this.sheetNavbarTitleContainer);
      this.sheetNavbar.appendChild(this.sheetNavbarActions);
      this.sheetHeader.appendChild(this.sheetKnob);
      this.sheetHeader.appendChild(this.sheetNavbar);
      this.sheetBody = document.createElement("div");
      this.sheetBody.classList.add("ui-sheet__body");
      this.sheetBody.appendChild(this.body);
      this.sheet.appendChild(this.sheetHeader);
      this.sheet.appendChild(this.sheetBody);
      this.sheetContainer.appendChild(this.sheet);
    }
  }, {
    key: "calcClient",
    value: function calcClient(e) {
      this.clientX = 0;
      this.clientY = 0;

      if (e.clientX || e.clientY) {
        this.clientX = e.clientX;
        this.clientY = e.clientY;
      }

      if (e.touches) {
        this.clientX = e.touches[0].clientX;
        this.clientY = e.touches[0].clientY;
      }
    }
  }, {
    key: "sheetStart",
    value: function sheetStart(e) {
      e.preventDefault();
      e.stopImmediatePropagation();
      this.calcClient(e);
      this.knobStart(e);
      this.sheetState = {
        "dragging": true
      };
    }
  }, {
    key: "sheetMove",
    value: function sheetMove(e) {
      e.stopImmediatePropagation();

      if (this.state.dragging) {
        this.calcClient(e);
        this.sheetPosition = this.clientY;
      }
    }
  }, {
    key: "sheetEnd",
    value: function sheetEnd(e) {
      e.stopImmediatePropagation();
      this.sheetState = {
        "dragging": false
      };

      switch (this.state.position) {
        case this.props.positions.full:
          if (this.knobRange < 0.45) {
            this.sheetState = {
              position: "mini"
            };
          } else if (this.knobRange < 0.90) {
            this.sheetState = {
              position: "half"
            };
          } else {
            this.sheetState = {
              position: "full"
            };
          }

          break;

        case this.props.positions.half:
          if (this.knobRange > 0.55) {
            this.sheetState = {
              position: "full"
            };
          } else if (this.knobRange > 0.45) {
            this.sheetState = {
              position: "half"
            };
          } else {
            this.sheetState = {
              position: "mini"
            };
          }

          break;

        case this.props.positions.mini:
          if (this.knobRange > 0.45) {
            this.sheetState = {
              position: "full"
            };
          } else if (this.knobRange > 0.10) {
            this.sheetState = {
              position: "half"
            };
          } else {
            this.sheetState = {
              position: "mini"
            };
          }

          break;
      }
    }
  }, {
    key: "knobStart",
    value: function knobStart() {
      this.sheetBounds = this.sheet.getBoundingClientRect();
      this.knobOffsetTop = this.clientY - this.sheetBounds.top;
    }
  }, {
    key: "knobRange",
    get: function get() {
      this.sheetBounds = this.sheet.getBoundingClientRect();
      return 1 - (this.sheetBounds.top + this.sheetKnob.clientHeight) / this.sheet.clientHeight;
    }
  }, {
    key: "sheetState",
    set: function set(state) {
      this.sheetBounds = this.sheet.getBoundingClientRect();

      if ("dragging" in state) {
        this.state.dragging = state.dragging;

        if (!state.dragging) {
          this.sheet.classList.add("ui-sheet--sliding");
        } else {
          this.sheet.classList.remove("ui-sheet--sliding");
        }
      }

      this.sheet.classList.remove("ui-sheet--full");
      this.sheet.classList.remove("ui-sheet--minimized");

      if ("position" in state) {
        this.state.position = state.position;
        this.sheet.classList.add("ui-sheet--sliding");

        switch (state.position) {
          case this.props.positions.full:
            this.sheet.style.transform = "translate(0, 0)";
            this.sheet.classList.add("ui-sheet--full");
            break;

          case this.props.positions.half:
            this.sheet.style.transform = "translate(0, calc(50% - ".concat(this.sheetKnob.clientHeight, "px)");
            break;

          case this.props.positions.mini:
            this.sheet.style.transform = "translate(0, calc(100% - ".concat(this.sheetKnob.clientHeight, "px)");
            this.sheet.classList.add("ui-sheet--minimized");
            break;
        }
      }

      if ("dismissed" in state) {
        this.state.dismissed = state.dismissed;

        if (state.dismissed) {
          this.sheet.classList.add("ui-sheet--sliding");
          this.sheet.style.transform = "translate(0, 100%)";
        } else {
          this.sheetState = {
            position: "half"
          };
        }
      }
    }
  }, {
    key: "sheetPosition",
    set: function set(y) {
      this.clientY = y;
      this.sheet.style.transform = "translate(0, ".concat(y - this.knobOffsetTop, "px)");
    }
  }, {
    key: "listenSheet",
    value: function listenSheet() {
      var _this6 = this;

      this.sheetKnob.addEventListener("mousedown", function (e) {
        _this6.sheetStart(e);
      });
      this.sheetKnob.addEventListener("mouseup", function (e) {
        _this6.sheetEnd(e);
      });
      this.sheetNavbarTitleContainer.addEventListener("touchstart", function (e) {
        _this6.sheetStart(e);
      });
      this.sheetNavbarTitleContainer.addEventListener("touchend", function (e) {
        _this6.sheetEnd(e);
      });
      window.addEventListener("mouseup", function (e) {
        if (_this6.state.dragging) {
          _this6.sheetEnd(e);
        }
      });
      this.sheetKnob.addEventListener("touchstart", function (e) {
        _this6.sheetStart(e);
      });
      this.sheetKnob.addEventListener("touchend", function (e) {
        _this6.sheetEnd(e);
      });
      this.sheetKnob.addEventListener("touchcancel", function (e) {
        _this6.sheetEnd(e);
      });
      window.addEventListener("touchend", function (e) {
        _this6.sheetEnd(e);
      });
      window.addEventListener("mousemove", function (e) {
        _this6.sheetMove(e);
      });
      window.addEventListener("touchmove", function (e) {
        _this6.sheetMove(e);
      });
      this.sheetState = {
        "position": this.state.position
      };
    }
  }]);

  return Sheet;
}();

var sheetBody = document.getElementById("body-sheet").content.cloneNode(true);
var sheet = new Sheet({
  id: "sheet-0",
  title: "My Cart",
  body: sheetBody
});
var openSheet = document.getElementById("show-sheet");

openSheet.onclick = function () {
  sheet.sheetState = {
    dismissed: false
  };
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvcGNvZGVQcmV2aWV3LmpzIl0sIm5hbWVzIjpbImlzRW1wdHkiLCJ2YXJpYWJsZSIsInN1cHBvcnRzVG91Y2giLCJ3aW5kb3ciLCJuYXZpZ2F0b3IiLCJtYXhUb3VjaFBvaW50cyIsIm1zTWF4VG91Y2hQb2ludHMiLCJNYXRlcmlhbEljb24iLCJpY29uIiwiY29uc29sZSIsImxvZyIsIkFsZXJ0IiwiUmlwcGxlIiwic2hhZG93IiwiYXR0YWNoU2hhZG93IiwibW9kZSIsInRlbXBsYXRlIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJhcHBlbmRDaGlsZCIsInBhcmVudCIsInBhcmVudEVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJyaXBwbGVGYWRlRGVsYXkiLCJidXR0b25UaW50IiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImdldFByb3BlcnR5VmFsdWUiLCJsaXN0ZW5FbGVtZW50IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiZSIsImNsaWVudFgiLCJjbGllbnRZIiwidG91Y2hlcyIsImdldFJpcHBsZXNOb3RMZWF2ZSIsImNhbGNDbGllbnQiLCJjaXJjbGUiLCJjcmVhdGVFbGVtZW50IiwiZGlhbWV0ZXIiLCJNYXRoIiwibWF4IiwiY2xpZW50V2lkdGgiLCJjbGllbnRIZWlnaHQiLCJyYWRpdXMiLCJ4IiwiYm91bmRzIiwibGVmdCIsInkiLCJ0b3AiLCJjZW50ZXJYIiwid2lkdGgiLCJjZW50ZXJZIiwiaGVpZ2h0Iiwic3R5bGUiLCJiYWNrZ3JvdW5kQ29sb3IiLCJzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCJyaXBwbGVzIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJyaXBwbGUiLCJzZXRUaW1lb3V0IiwicmVtb3ZlUmlwcGxlcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmUiLCJyaXBwbGVFbnRlciIsInJpcHBsZUxlYXZlIiwiSFRNTEVsZW1lbnQiLCJCdXR0b24iLCJIVE1MQnV0dG9uRWxlbWVudCIsImN1c3RvbUVsZW1lbnRzIiwiZGVmaW5lIiwiZXh0ZW5kcyIsIlNoZWV0IiwiaWQiLCJkaXNtaXNzaWJsZSIsInRpdGxlIiwiYm9keSIsImdsb2JhbCIsInByb3BzIiwiZHJhZ2dhYmxlIiwicG9zaXRpb25zIiwibWluaSIsImhhbGYiLCJmdWxsIiwic3RhdGUiLCJkaXNtaXNzZWQiLCJkcmFnZ2luZyIsInBvc2l0aW9uIiwiY3JlYXRlU2hlZXQiLCJsaXN0ZW5TaGVldCIsInNoZWV0Q29udGFpbmVyIiwic2hlZXQiLCJzaGVldEtub2IiLCJzaGVldEtub2JIYW5kbGUiLCJzaGVldEhlYWRlciIsInNoZWV0TmF2YmFyIiwic2hlZXROYXZiYXJUaXRsZUNvbnRhaW5lciIsInNoZWV0TmF2YmFyVGl0bGUiLCJjcmVhdGVUZXh0Tm9kZSIsImFwcGVuZCIsInNoZWV0TmF2YmFyQWN0aW9ucyIsImFjdGlvbkRpc21pc3MiLCJzZXRBdHRyaWJ1dGUiLCJpbm5lckhUTUwiLCJvbmNsaWNrIiwic2hlZXRTdGF0ZSIsInNoZWV0Qm9keSIsInByZXZlbnREZWZhdWx0Iiwia25vYlN0YXJ0Iiwic2hlZXRQb3NpdGlvbiIsImtub2JSYW5nZSIsInNoZWV0Qm91bmRzIiwia25vYk9mZnNldFRvcCIsInRyYW5zZm9ybSIsInNoZWV0U3RhcnQiLCJzaGVldEVuZCIsInNoZWV0TW92ZSIsIm9wZW5TaGVldCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLFNBQVNBLE9BQVQsQ0FBaUJDLFFBQWpCLEVBQTJCO0FBQ3ZCLFNBQU8sT0FBT0EsUUFBUCxLQUFvQixXQUFwQixJQUFtQ0EsUUFBMUM7QUFDSDs7QUFFRCxTQUFTQyxhQUFULEdBQXlCO0FBQ3JCLFNBQVMsa0JBQWtCQyxNQUFuQixJQUNIQyxTQUFTLENBQUNDLGNBQVYsR0FBMkIsQ0FEeEIsSUFFSEQsU0FBUyxDQUFDRSxnQkFBVixHQUE2QixDQUZsQztBQUdIOztJQUVLQyxZLEdBQ0Ysc0JBQVlDLElBQVos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QUFDc0YsU0FBTCxDQUFldEYsQ0FBZjtBQUNILE9BRkQ7QUFJQTdCLE1BQUFBLE1BQU0sQ0FBQzZELGdCQUFQLENBQXdCLFdBQXhCLEVBQXFDLFVBQUNoQyxDQUFELEVBQU87QUFDeEMsUUFBQSxNQUFJLENBQUNzRixTQUFMLENBQWV0RixDQUFmO0FBQ0gsT0FGRDtBQUlBLFdBQUsyRSxVQUFMLEdBQWtCO0FBQ2Qsb0JBQVksS0FBS3JCLEtBQUwsQ0FBV0c7QUFEVCxPQUFsQjtBQUdIOzs7Ozs7QUFLTCxJQUFNbUIsU0FBUyxHQUFHM0YsUUFBUSxDQUFDQyxjQUFULENBQXdCLFlBQXhCLEVBQXNDQyxPQUF0QyxDQUE4Q0MsU0FBOUMsQ0FBd0QsSUFBeEQsQ0FBbEI7QUFFQSxJQUFNeUUsS0FBSyxHQUFHLElBQUluQixLQUFKLENBQVU7QUFDcEJDLEVBQUFBLEVBQUUsRUFBRSxTQURnQjtBQUVwQkUsRUFBQUEsS0FBSyxFQUFFLFNBRmE7QUFHcEJDLEVBQUFBLElBQUksRUFBRThCO0FBSGMsQ0FBVixDQUFkO0FBTUEsSUFBTVcsU0FBUyxHQUFHdEcsUUFBUSxDQUFDQyxjQUFULENBQXdCLFlBQXhCLENBQWxCOztBQUVBcUcsU0FBUyxDQUFDYixPQUFWLEdBQW9CLFlBQU07QUFDdEJiLEVBQUFBLEtBQUssQ0FBQ2MsVUFBTixHQUFtQjtBQUNmcEIsSUFBQUEsU0FBUyxFQUFFO0FBREksR0FBbkI7QUFHSCxDQUpEIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gaXNFbXB0eSh2YXJpYWJsZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFyaWFibGUgIT09ICd1bmRlZmluZWQnICYmIHZhcmlhYmxlO1xufVxuXG5mdW5jdGlvbiBzdXBwb3J0c1RvdWNoKCkge1xuICAgIHJldHVybiAoKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdykgfHxcbiAgICAgICAgKG5hdmlnYXRvci5tYXhUb3VjaFBvaW50cyA+IDApIHx8XG4gICAgICAgIChuYXZpZ2F0b3IubXNNYXhUb3VjaFBvaW50cyA+IDApKTtcbn1cblxuY2xhc3MgTWF0ZXJpYWxJY29uIHtcbiAgICBjb25zdHJ1Y3RvcihpY29uKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCc8c3BhbiBjbGFzcz1cIm1hdGVyaWFsLWljb25zXCI+JiN4ZTMxNjs8L3NwYW4+Jyk7XG4gICAgfVxufVxuXG5jbGFzcyBBbGVydCB7XG5cbn1cblxuY2xhc3MgUmlwcGxlIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMuc2hhZG93ID0gdGhpcy5hdHRhY2hTaGFkb3coe1xuICAgICAgICAgICAgbW9kZTogXCJvcGVuXCJcbiAgICAgICAgfSk7XG5cblx0XHR0aGlzLnRlbXBsYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1aS1idG4tdGVtcGxhdGVcIikuY29udGVudC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnNoYWRvdy5hcHBlbmRDaGlsZCh0aGlzLnRlbXBsYXRlKTtcbiAgICB9XG5cbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSB0aGlzLnBhcmVudEVsZW1lbnQ7XG5cbiAgICAgICAgaWYgKGlzRW1wdHkodGhpcy5wYXJlbnQpKSB7XG4gICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoXCJ1aS1yaXBwbGVcIik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJpcHBsZUZhZGVEZWxheSA9IDMwMDtcbiAgICAgICAgdGhpcy5idXR0b25UaW50ID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcykuZ2V0UHJvcGVydHlWYWx1ZSgnLS1yaXBwbGUtdGludCcpO1xuXG4gICAgICAgIHRoaXMubGlzdGVuRWxlbWVudCgpO1xuICAgIH1cblxuICAgIGdldCBib3VuZHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIH1cblxuICAgIGNhbGNDbGllbnQoZSkge1xuICAgICAgICB0aGlzLmNsaWVudFggPSAwO1xuICAgICAgICB0aGlzLmNsaWVudFkgPSAwO1xuXG4gICAgICAgIGlmIChlLmNsaWVudFggfHwgZS5jbGllbnRZKSB7XG4gICAgICAgICAgICB0aGlzLmNsaWVudFggPSBlLmNsaWVudFg7XG4gICAgICAgICAgICB0aGlzLmNsaWVudFkgPSBlLmNsaWVudFk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZS50b3VjaGVzKSB7XG4gICAgICAgICAgICB0aGlzLmNsaWVudFggPSBlLnRvdWNoZXNbMF0uY2xpZW50WDtcbiAgICAgICAgICAgIHRoaXMuY2xpZW50WSA9IGUudG91Y2hlc1swXS5jbGllbnRZO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmlwcGxlRW50ZXIoZSkge1xuICAgICAgICB0aGlzLmdldFJpcHBsZXNOb3RMZWF2ZSgpO1xuXG4gICAgICAgIHRoaXMuY2FsY0NsaWVudChlKTtcbiAgICAgICAgdGhpcy5jaXJjbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgdGhpcy5kaWFtZXRlciA9IE1hdGgubWF4KHRoaXMucGFyZW50LmNsaWVudFdpZHRoLCB0aGlzLnBhcmVudC5jbGllbnRIZWlnaHQpO1xuICAgICAgICB0aGlzLnJhZGl1cyA9IHRoaXMuZGlhbWV0ZXIgLyAyO1xuXG4gICAgICAgIHRoaXMueCA9IGAke3RoaXMuY2xpZW50WCAtIHRoaXMuYm91bmRzLmxlZnQgLSB0aGlzLnJhZGl1c31weGA7XG4gICAgICAgIHRoaXMueSA9IGAke3RoaXMuY2xpZW50WSAtIHRoaXMuYm91bmRzLnRvcCAtIHRoaXMucmFkaXVzfXB4YDtcbiAgICAgICAgdGhpcy5jZW50ZXJYID0gYCR7dGhpcy5ib3VuZHMud2lkdGggLyAyfXB4YDtcbiAgICAgICAgdGhpcy5jZW50ZXJZID0gYCR7dGhpcy5ib3VuZHMuaGVpZ2h0IC8gMn1weGA7XG5cbiAgICAgICAgaWYgKHRoaXMuY2xpZW50WCA9PT0gMCAmJiB0aGlzLmNsaWVudFkgPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMueCA9IGAke3RoaXMuY2VudGVyWCAtIHRoaXMucmFkaXVzfXB4YDtcbiAgICAgICAgICAgIHRoaXMueSA9IGAke3RoaXMuY2VudGVyWSAtIHRoaXMucmFkaXVzfXB4YDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY2lyY2xlLnN0eWxlLndpZHRoID0gdGhpcy5jaXJjbGUuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5kaWFtZXRlcn1weGA7XG4gICAgICAgIHRoaXMuY2lyY2xlLnN0eWxlLmxlZnQgPSB0aGlzLng7XG4gICAgICAgIHRoaXMuY2lyY2xlLnN0eWxlLnRvcCA9IHRoaXMueTtcbiAgICAgICAgdGhpcy5jaXJjbGUuY2xhc3NMaXN0LmFkZChcIl9yaXBwbGUtLWVudGVyXCIpO1xuXG4gICAgICAgIGlmICh0aGlzLmJ1dHRvblRpbnQpIHtcbiAgICAgICAgICAgIHRoaXMuY2lyY2xlLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGByZ2JhKCR7dGhpcy5idXR0b25UaW50fSwwLjI1KWA7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNoYWRvdy5hcHBlbmRDaGlsZCh0aGlzLmNpcmNsZSk7XG5cbiAgICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICB9XG5cbiAgICBnZXRSaXBwbGVzTm90TGVhdmUoKSB7XG4gICAgICAgIGxldCByaXBwbGVzID0gdGhpcy5zaGFkb3cucXVlcnlTZWxlY3RvckFsbChcIi5fcmlwcGxlLS1lbnRlcjpub3QoLl9yaXBwbGUtLWxlYXZlKVwiKTtcblxuICAgICAgICByaXBwbGVzLmZvckVhY2goKHJpcHBsZSkgPT4ge1xuICAgICAgICAgICAgcmlwcGxlLmNsYXNzTGlzdC5hZGQoXCJfcmlwcGxlLS1sZWF2ZVwiKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmlwcGxlTGVhdmUoZSkge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZ2V0UmlwcGxlc05vdExlYXZlKCk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVJpcHBsZXMoKTtcbiAgICAgICAgfSwgdGhpcy5yaXBwbGVGYWRlRGVsYXkpO1xuXG4gICAgICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gICAgfVxuXG4gICAgcmVtb3ZlUmlwcGxlcygpIHtcbiAgICAgICAgbGV0IHJpcHBsZXMgPSB0aGlzLnNoYWRvdy5xdWVyeVNlbGVjdG9yQWxsKFwiLl9yaXBwbGUtLWxlYXZlXCIpO1xuXG4gICAgICAgIHJpcHBsZXMuZm9yRWFjaCgocmlwcGxlKSA9PiB7XG4gICAgICAgICAgICByaXBwbGUuYWRkRXZlbnRMaXN0ZW5lcihcImFuaW1hdGlvbmVuZFwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByaXBwbGUucmVtb3ZlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgbGlzdGVuRWxlbWVudCgpIHtcbiAgICAgICAgaWYgKHN1cHBvcnRzVG91Y2goKSkge1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucmlwcGxlRW50ZXIoZSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgKGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnJpcHBsZUxlYXZlKGUpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobGVhdmVcIiwgKGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnJpcHBsZUxlYXZlKGUpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoY2FuY2VsXCIsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5yaXBwbGVMZWF2ZShlKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnJpcHBsZUVudGVyKGUpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgKGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnJpcHBsZUxlYXZlKGUpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIiwgKGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnJpcHBsZUxlYXZlKGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmNsYXNzIEJ1dHRvbiBleHRlbmRzIEhUTUxCdXR0b25FbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICB0aGlzLmNyZWF0ZUVsZW1lbnQoKTtcbiAgICB9XG5cbiAgICBjcmVhdGVFbGVtZW50KCkge1xuICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoXCJ1aS1idG5cIik7XG4gICAgICAgIHRoaXMucmlwcGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInVpLXJpcHBsZVwiKTtcblxuICAgICAgICB0aGlzLmFwcGVuZENoaWxkKHRoaXMucmlwcGxlKTtcbiAgICB9XG59XG5cbndpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ3VpLWJ0bicsIEJ1dHRvbiwge1xuICAgIGV4dGVuZHM6IFwiYnV0dG9uXCJcbn0pO1xud2luZG93LmN1c3RvbUVsZW1lbnRzLmRlZmluZSgndWktcmlwcGxlJywgUmlwcGxlKTtcblxuY2xhc3MgU2hlZXQge1xuICAgIGNvbnN0cnVjdG9yKHtcbiAgICAgICAgaWQ6IGlkLFxuICAgICAgICBkaXNtaXNzaWJsZTogZGlzbWlzc2libGUsXG4gICAgICAgIHRpdGxlOiB0aXRsZSxcbiAgICAgICAgYm9keTogYm9keVxuICAgIH0pIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMuYm9keSA9IGJvZHk7XG5cbiAgICAgICAgY29uc3QgZ2xvYmFsID0gdGhpcztcblxuICAgICAgICB0aGlzLnByb3BzID0ge1xuICAgICAgICAgICAgZGlzbWlzc2libGU6IGRpc21pc3NpYmxlIHx8IGZhbHNlLFxuICAgICAgICAgICAgZHJhZ2dhYmxlOiB0cnVlLFxuICAgICAgICAgICAgcG9zaXRpb25zOiB7XG4gICAgICAgICAgICAgICAgbWluaTogXCJtaW5pXCIsXG4gICAgICAgICAgICAgICAgaGFsZjogXCJoYWxmXCIsXG4gICAgICAgICAgICAgICAgZnVsbDogXCJmdWxsXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgZGlzbWlzc2VkOiBmYWxzZSxcbiAgICAgICAgICAgIGRyYWdnaW5nOiBmYWxzZSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiBnbG9iYWwucHJvcHMucG9zaXRpb25zLmhhbGZcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmNyZWF0ZVNoZWV0KCk7XG4gICAgICAgIHRoaXMubGlzdGVuU2hlZXQoKTtcbiAgICB9XG5cbiAgICBjcmVhdGVTaGVldCgpIHtcbiAgICAgICAgdGhpcy5zaGVldENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuaWQpO1xuXG4gICAgICAgIHRoaXMuc2hlZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0aGlzLnNoZWV0LmNsYXNzTGlzdC5hZGQoXCJ1aS1zaGVldFwiKTtcblxuICAgICAgICB0aGlzLnNoZWV0S25vYiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMuc2hlZXRLbm9iLmNsYXNzTGlzdC5hZGQoXCJ1aS1zaGVldF9fZHJhZ2dhYmxlXCIpO1xuXG4gICAgICAgIHRoaXMuc2hlZXRLbm9iSGFuZGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdGhpcy5zaGVldEtub2JIYW5kbGUuY2xhc3NMaXN0LmFkZChcInVpLXNoZWV0X19rbm9iXCIpO1xuXG4gICAgICAgIHRoaXMuc2hlZXRLbm9iLmFwcGVuZENoaWxkKHRoaXMuc2hlZXRLbm9iSGFuZGxlKTtcblxuICAgICAgICB0aGlzLnNoZWV0SGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdGhpcy5zaGVldEhlYWRlci5jbGFzc0xpc3QuYWRkKFwidWktc2hlZXRfX2hlYWRlclwiKTtcblxuICAgICAgICB0aGlzLnNoZWV0TmF2YmFyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdGhpcy5zaGVldE5hdmJhci5jbGFzc0xpc3QuYWRkKFwidWktaGVhZGVyXCIpO1xuXG4gICAgICAgIHRoaXMuc2hlZXROYXZiYXJUaXRsZUNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMuc2hlZXROYXZiYXJUaXRsZUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwidWktaGVhZGVyX190aXRsZVwiKTtcbiAgICAgICAgdGhpcy5zaGVldE5hdmJhclRpdGxlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGhpcy50aXRsZSk7XG4gICAgICAgIHRoaXMuc2hlZXROYXZiYXJUaXRsZUNvbnRhaW5lci5hcHBlbmQodGhpcy5zaGVldE5hdmJhclRpdGxlKTtcblxuICAgICAgICB0aGlzLnNoZWV0TmF2YmFyQWN0aW9ucyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMuc2hlZXROYXZiYXJBY3Rpb25zLmNsYXNzTGlzdC5hZGQoXCJ1aS1oZWFkZXJfX2FjdGlvbnNcIik7XG5cbiAgICAgICAgdGhpcy5hY3Rpb25EaXNtaXNzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgdGhpcy5hY3Rpb25EaXNtaXNzLnNldEF0dHJpYnV0ZShcImlzXCIsIFwidWktYnRuXCIpO1xuICAgICAgICB0aGlzLmFjdGlvbkRpc21pc3MuY2xhc3NMaXN0LmFkZChcInVpLWJ0blwiKTtcbiAgICAgICAgdGhpcy5hY3Rpb25EaXNtaXNzLnNldEF0dHJpYnV0ZShcImNvbG9yXCIsIFwibGlnaHRcIik7XG4gICAgICAgIHRoaXMuYWN0aW9uRGlzbWlzcy5zZXRBdHRyaWJ1dGUoXCJyb3VuZGVkXCIsIHRydWUpO1xuICAgICAgICB0aGlzLmFjdGlvbkRpc21pc3MuaW5uZXJIVE1MID0gJzxzcGFuIGNsYXNzPVwibWF0ZXJpYWwtc3ltYm9scy1zaGFycFwiPmNsb3NlPC9zcGFuPic7XG5cbiAgICAgICAgdGhpcy5hY3Rpb25EaXNtaXNzLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNoZWV0U3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgZGlzbWlzc2VkOiB0cnVlXG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuc2hlZXROYXZiYXJBY3Rpb25zLmFwcGVuZENoaWxkKHRoaXMuYWN0aW9uRGlzbWlzcyk7XG5cbiAgICAgICAgdGhpcy5zaGVldE5hdmJhci5hcHBlbmRDaGlsZCh0aGlzLnNoZWV0TmF2YmFyVGl0bGVDb250YWluZXIpO1xuICAgICAgICB0aGlzLnNoZWV0TmF2YmFyLmFwcGVuZENoaWxkKHRoaXMuc2hlZXROYXZiYXJBY3Rpb25zKTtcblxuICAgICAgICB0aGlzLnNoZWV0SGVhZGVyLmFwcGVuZENoaWxkKHRoaXMuc2hlZXRLbm9iKTtcbiAgICAgICAgdGhpcy5zaGVldEhlYWRlci5hcHBlbmRDaGlsZCh0aGlzLnNoZWV0TmF2YmFyKTtcblxuICAgICAgICB0aGlzLnNoZWV0Qm9keSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMuc2hlZXRCb2R5LmNsYXNzTGlzdC5hZGQoXCJ1aS1zaGVldF9fYm9keVwiKTtcbiAgICAgICAgdGhpcy5zaGVldEJvZHkuYXBwZW5kQ2hpbGQodGhpcy5ib2R5KTtcblxuICAgICAgICB0aGlzLnNoZWV0LmFwcGVuZENoaWxkKHRoaXMuc2hlZXRIZWFkZXIpO1xuICAgICAgICB0aGlzLnNoZWV0LmFwcGVuZENoaWxkKHRoaXMuc2hlZXRCb2R5KTtcblxuICAgICAgICB0aGlzLnNoZWV0Q29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuc2hlZXQpO1xuICAgIH1cblxuICAgIGNhbGNDbGllbnQoZSkge1xuICAgICAgICB0aGlzLmNsaWVudFggPSAwO1xuICAgICAgICB0aGlzLmNsaWVudFkgPSAwO1xuXG4gICAgICAgIGlmIChlLmNsaWVudFggfHwgZS5jbGllbnRZKSB7XG4gICAgICAgICAgICB0aGlzLmNsaWVudFggPSBlLmNsaWVudFg7XG4gICAgICAgICAgICB0aGlzLmNsaWVudFkgPSBlLmNsaWVudFk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZS50b3VjaGVzKSB7XG4gICAgICAgICAgICB0aGlzLmNsaWVudFggPSBlLnRvdWNoZXNbMF0uY2xpZW50WDtcbiAgICAgICAgICAgIHRoaXMuY2xpZW50WSA9IGUudG91Y2hlc1swXS5jbGllbnRZO1xuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICBzaGVldFN0YXJ0KGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIHRoaXMuY2FsY0NsaWVudChlKTtcbiAgICAgICAgdGhpcy5rbm9iU3RhcnQoZSk7XG4gICAgICAgIHRoaXMuc2hlZXRTdGF0ZSA9IHtcbiAgICAgICAgICAgIFwiZHJhZ2dpbmdcIjogdHJ1ZVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHNoZWV0TW92ZShlKSB7XG4gICAgICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuZHJhZ2dpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuY2FsY0NsaWVudChlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5zaGVldFBvc2l0aW9uID0gdGhpcy5jbGllbnRZO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2hlZXRFbmQoZSkge1xuICAgICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIHRoaXMuc2hlZXRTdGF0ZSA9IHtcbiAgICAgICAgICAgIFwiZHJhZ2dpbmdcIjogZmFsc2VcbiAgICAgICAgfTtcblxuICAgICAgICBzd2l0Y2ggKHRoaXMuc3RhdGUucG9zaXRpb24pIHtcbiAgICAgICAgICAgIGNhc2UgdGhpcy5wcm9wcy5wb3NpdGlvbnMuZnVsbDpcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5rbm9iUmFuZ2UgPCAwLjQ1KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hlZXRTdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcIm1pbmlcIlxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5rbm9iUmFuZ2UgPCAwLjkwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hlZXRTdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcImhhbGZcIlxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hlZXRTdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcImZ1bGxcIlxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgdGhpcy5wcm9wcy5wb3NpdGlvbnMuaGFsZjpcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5rbm9iUmFuZ2UgPiAwLjU1KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hlZXRTdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcImZ1bGxcIlxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5rbm9iUmFuZ2UgPiAwLjQ1KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hlZXRTdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcImhhbGZcIlxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hlZXRTdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcIm1pbmlcIlxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgdGhpcy5wcm9wcy5wb3NpdGlvbnMubWluaTpcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5rbm9iUmFuZ2UgPiAwLjQ1KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hlZXRTdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcImZ1bGxcIlxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5rbm9iUmFuZ2UgPiAwLjEwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hlZXRTdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcImhhbGZcIlxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hlZXRTdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcIm1pbmlcIlxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAga25vYlN0YXJ0KCkge1xuXG4gICAgICAgIHRoaXMuc2hlZXRCb3VuZHMgPSB0aGlzLnNoZWV0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICB0aGlzLmtub2JPZmZzZXRUb3AgPSB0aGlzLmNsaWVudFkgLSB0aGlzLnNoZWV0Qm91bmRzLnRvcDtcbiAgICB9XG5cbiAgICBnZXQga25vYlJhbmdlKCkge1xuICAgICAgICB0aGlzLnNoZWV0Qm91bmRzID0gdGhpcy5zaGVldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgcmV0dXJuIDEgLSAoKHRoaXMuc2hlZXRCb3VuZHMudG9wICsgdGhpcy5zaGVldEtub2IuY2xpZW50SGVpZ2h0KSAvIHRoaXMuc2hlZXQuY2xpZW50SGVpZ2h0KTtcbiAgICB9XG5cbiAgICBzZXQgc2hlZXRTdGF0ZShzdGF0ZSkge1xuICAgICAgICB0aGlzLnNoZWV0Qm91bmRzID0gdGhpcy5zaGVldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgICBpZiAoXCJkcmFnZ2luZ1wiIGluIHN0YXRlKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlLmRyYWdnaW5nID0gc3RhdGUuZHJhZ2dpbmc7XG5cbiAgICAgICAgICAgIGlmICghc3RhdGUuZHJhZ2dpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNoZWV0LmNsYXNzTGlzdC5hZGQoXCJ1aS1zaGVldC0tc2xpZGluZ1wiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaGVldC5jbGFzc0xpc3QucmVtb3ZlKFwidWktc2hlZXQtLXNsaWRpbmdcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNoZWV0LmNsYXNzTGlzdC5yZW1vdmUoXCJ1aS1zaGVldC0tZnVsbFwiKTtcbiAgICAgICAgdGhpcy5zaGVldC5jbGFzc0xpc3QucmVtb3ZlKFwidWktc2hlZXQtLW1pbmltaXplZFwiKTtcblxuICAgICAgICBpZiAoXCJwb3NpdGlvblwiIGluIHN0YXRlKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlLnBvc2l0aW9uID0gc3RhdGUucG9zaXRpb247XG4gICAgICAgICAgICB0aGlzLnNoZWV0LmNsYXNzTGlzdC5hZGQoXCJ1aS1zaGVldC0tc2xpZGluZ1wiKTtcblxuICAgICAgICAgICAgc3dpdGNoIChzdGF0ZS5wb3NpdGlvbikge1xuICAgICAgICAgICAgICAgIGNhc2UgdGhpcy5wcm9wcy5wb3NpdGlvbnMuZnVsbDpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGVldC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKDAsIDApYDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGVldC5jbGFzc0xpc3QuYWRkKFwidWktc2hlZXQtLWZ1bGxcIik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgdGhpcy5wcm9wcy5wb3NpdGlvbnMuaGFsZjpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGVldC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKDAsIGNhbGMoNTAlIC0gJHt0aGlzLnNoZWV0S25vYi5jbGllbnRIZWlnaHR9cHgpYDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSB0aGlzLnByb3BzLnBvc2l0aW9ucy5taW5pOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNoZWV0LnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoMCwgY2FsYygxMDAlIC0gJHt0aGlzLnNoZWV0S25vYi5jbGllbnRIZWlnaHR9cHgpYDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGVldC5jbGFzc0xpc3QuYWRkKFwidWktc2hlZXQtLW1pbmltaXplZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXCJkaXNtaXNzZWRcIiBpbiBzdGF0ZSkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5kaXNtaXNzZWQgPSBzdGF0ZS5kaXNtaXNzZWQ7XG5cbiAgICAgICAgICAgIGlmIChzdGF0ZS5kaXNtaXNzZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNoZWV0LmNsYXNzTGlzdC5hZGQoXCJ1aS1zaGVldC0tc2xpZGluZ1wiKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNoZWV0LnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoMCwgMTAwJSlgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNoZWV0U3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcImhhbGZcIlxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXQgc2hlZXRQb3NpdGlvbih5KSB7XG4gICAgICAgIHRoaXMuY2xpZW50WSA9IHk7XG5cbiAgICAgICAgdGhpcy5zaGVldC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKDAsICR7eSAtIHRoaXMua25vYk9mZnNldFRvcH1weClgO1xuICAgIH1cblxuICAgIGxpc3RlblNoZWV0KCkge1xuICAgICAgICB0aGlzLnNoZWV0S25vYi5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNoZWV0U3RhcnQoZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuc2hlZXRLbm9iLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIChlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNoZWV0RW5kKGUpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnNoZWV0TmF2YmFyVGl0bGVDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgKGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2hlZXRTdGFydChlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5zaGVldE5hdmJhclRpdGxlQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCAoZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zaGVldEVuZChlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIChlKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5kcmFnZ2luZykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2hlZXRFbmQoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuc2hlZXRLbm9iLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIChlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNoZWV0U3RhcnQoZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuc2hlZXRLbm9iLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCAoZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zaGVldEVuZChlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5zaGVldEtub2IuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoY2FuY2VsXCIsIChlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNoZWV0RW5kKGUpO1xuICAgICAgICB9KTtcblxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIChlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNoZWV0RW5kKGUpO1xuICAgICAgICB9KTtcblxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCAoZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zaGVldE1vdmUoZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsIChlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNoZWV0TW92ZShlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5zaGVldFN0YXRlID0ge1xuICAgICAgICAgICAgXCJwb3NpdGlvblwiOiB0aGlzLnN0YXRlLnBvc2l0aW9uXG4gICAgICAgIH07XG4gICAgfVxufVxuXG5cblxuY29uc3Qgc2hlZXRCb2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJib2R5LXNoZWV0XCIpLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpO1xuXG5jb25zdCBzaGVldCA9IG5ldyBTaGVldCh7XG4gICAgaWQ6IFwic2hlZXQtMFwiLFxuICAgIHRpdGxlOiBcIk15IENhcnRcIixcbiAgICBib2R5OiBzaGVldEJvZHlcbn0pO1xuXG5jb25zdCBvcGVuU2hlZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNob3ctc2hlZXRcIik7XG5cbm9wZW5TaGVldC5vbmNsaWNrID0gKCkgPT4ge1xuICAgIHNoZWV0LnNoZWV0U3RhdGUgPSB7XG4gICAgICAgIGRpc21pc3NlZDogZmFsc2VcbiAgICB9O1xufTsiXX0=</script></body></html>